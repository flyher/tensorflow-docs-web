<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>在 Ubuntu 上安装 TensorFlow</title>
    <link href="//xitu.github.io/tensorflow-docs-web/assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="//xitu.github.io/tensorflow-docs-web/assets/css/main.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
</head>
<body>
<!-- Header start -->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">TensorFlow</a>
    <button class="navbar-toggler" type="button" aria-expanded="false" aria-label="Menu"
            onclick="$('.collapse').toggle()">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse">
        <ul class="navbar-nav mr-auto">
        </ul>
        <!-- TODO: Search function-->
        <!--<form class="form-inline my-2 my-lg-0">-->
            <!--<input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">-->
            <!--<button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>-->
        <!--</form>-->
    </div>
</nav>
<script>
    var head = [{'link': '//xitu.github.io/tensorflow-docs-web/extend/index.html', 'name': '扩展', 'selected': 0}, {'link': '//xitu.github.io/tensorflow-docs-web/install/index.html', 'name': '安装 TensorFlow', 'selected': 1}, {'link': '//xitu.github.io/tensorflow-docs-web/deploy/index.html', 'name': '部署', 'selected': 0}, {'link': '//xitu.github.io/tensorflow-docs-web/about/index.html', 'name': '关于 TensorFlow', 'selected': 0}, {'link': '//xitu.github.io/tensorflow-docs-web/get_started/index.html', 'name': '开始', 'selected': 0}, {'link': '//xitu.github.io/tensorflow-docs-web/mobile/index.html', 'name': '概述', 'selected': 0}, {'link': '//xitu.github.io/tensorflow-docs-web/tutorials/index.html', 'name': '教程', 'selected': 0}, {'link': '//xitu.github.io/tensorflow-docs-web/javascript/index.html', 'name': 'JavaScript', 'selected': 0}, {'link': '//xitu.github.io/tensorflow-docs-web/performance/index.html', 'name': '性能', 'selected': 0}, {'link': '//xitu.github.io/tensorflow-docs-web/community/index.html', 'name': '社区', 'selected': 0}, {'link': '//xitu.github.io/tensorflow-docs-web/programmers_guide/index.html', 'name': '开发者指南', 'selected': 0}]
</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-92630037-8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-92630037-8');
</script>

<!-- Header end -->

<!-- Content start-->
<div class="container-fluid">
    <div class="row">
        <nav class="col-md-2 d-none d-md-block bg-light sidebar">
    <div class="sidebar-sticky" id="left-nav">

    </div>
</nav>
<script>
    var nav = [{'type': 'child', 'link': '//xitu.github.io/tensorflow-docs-web/install/index.html', 'title': '安装 TensorFlow'}, {'type': 'parent', 'title': ' Python', 'sub_class': [{'link': '//xitu.github.io/tensorflow-docs-web/install/install_linux.html', 'title': '在 Ubuntu 上安装 TensorFlow'}, {'link': '//xitu.github.io/tensorflow-docs-web/install/install_mac.html', 'title': '在 macOS 中安装 TensorFlow'}, {'link': '//xitu.github.io/tensorflow-docs-web/install/install_windows.html', 'title': '在 Windows 上安装 TensorFlow'}, {'link': '//xitu.github.io/tensorflow-docs-web/install/install_sources.html', 'title': '通过源码安装 TensorFlow'}]}, {'type': 'child', 'link': '//xitu.github.io/tensorflow-docs-web/install/migration.html', 'title': '迁移至 TensorFlow 1.0'}, {'type': 'parent', 'title': ' Other Languages', 'sub_class': [{'link': '//xitu.github.io/tensorflow-docs-web/install/install_java.html', 'title': '安装 TensorFlow for Java'}, {'link': '//xitu.github.io/tensorflow-docs-web/install/install_go.html', 'title': '安装 Go 版本 Tensorflow'}, {'link': '//xitu.github.io/tensorflow-docs-web/install/install_c.html', 'title': '安装适用于 C 的 TensorFlow'}]}]
</script>
        <main role="main" class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content">
            <h1 id="toc-0">在 Ubuntu 上安装 TensorFlow</h1>
<p>本指南将介绍如何在 Ubuntu 上安装 TensorFlow。虽然这些说明可能也适用于其他 Linux 版本，但我们只在满足以下要求的计算机上验证过这些说明（而且我们只支持在此类计算机上按这些说明操作）：</p>
<ul>
<li>64 位台式机或笔记本电脑</li>
<li>Ubuntu 16.04 或更高版本</li>
</ul>
<h2 id="toc-1">安装哪一个 TensorFlow</h2>
<p>你必须在下列几种 TensorFlow 中选择其一来安装：</p>
<ul>
<li><strong>仅有 CPU 支持的 TensorFlow</strong>。 如果你的系统中没有 NVIDIA® GPU，你必须安装这个版本。 需要注意的是，这个版本的 TensorFlow 通常要更易于安装（往往仅需 5 至 10 分钟），所以即使你有英伟达（NVIDIA）的 GPU 显卡，我们仍然推荐你首先尝试安装这一版本。  </li>
<li><strong>含有 GPU 支持的 TensorFlow</strong>。 TensorFlow 在 GPU上的运行速度要远大于相同程序在 CPU 上的运行速度。因此，如果你的系统中有符合以下要求的 NVIDIA® GPU 显卡，并且你的应用对性能有着严格的要求，你应该安装这一版本。</li>
</ul>
<p><a name="英伟达要求标准"></a></p>
<h3 id="toc-2">NVIDIA 对于使用 GPU 运行 TensorFlow 的要求</h3>
<p>如果你正在利用本指南中描述的方法之一来安装支持 GPU 的 TensorFlow，那么你的系统中必须要有如下的 NVIDIA 软件：</p>
<ul>
<li><a href="http://nvidia.com/cuda">CUDA Toolkit 9.0</a>。详见 <a href="http://docs.nvidia.com/cuda/cuda-installation-guide-linux/">NVIDIA 的文档</a>。请保证你将 CUDA 相关的路径像 NVIDIA 文档中所描述的那样添加在 <code>LD_LIBRARY_PATH</code> 环境变量中。<br>
 * <a href="http://developer.nvidia.com/cudnn">cuDNN SDK v7</a>. 详见 <a href="http://docs.nvidia.com/deeplearning/sdk/cudnn-install/">NVIDIA 的文档</a>，请保证你像 NVIDIA 文档中描述的那样创建了 <code>CUDA_HOME</code> 环境变量。</li>
<li>GPU 显卡拥有 CUDA 3.0 或者更高版本的计算性能，用于构建源码以及 3.5 或者更高版本的二进制文件。详见 <a href="https://developer.nvidia.com/cuda-gpus">NVIDIA 英伟达的文档</a> 中支持的 GPU 显卡列表。</li>
<li><a href="http://nvidia.com/driver">GPU 驱动</a> 支持你的 CUDA Toolkit 版本。</li>
<li><p>NVIDIA CUDA 解析工具的接口，libcupti-dev 库。该库提供了更高级的分析工具支持。要安装这个库，对 CUDA Toolkit 8.0 以上的版本运行如下命令即可：</p>
<pre>
$ <b>sudo apt-get install cuda-command-line-tools</b>
</pre><p>并且将其路径加在你的环境变量 <code>LD_LIBRARY_PATH</code> 中：</p>
<pre>
$ <b>export LD_LIBRARY_PATH=${LD_LIBRARY_PATH:+${LD_LIBRARY_PATH}:}/usr/local/cuda/extras/CUPTI/lib64</b>
</pre><p>对于 CUDA Toolkit 7.5及以下版本，运行：</p>
<pre>
$ <b>sudo apt-get install libcupti-dev</b>
</pre></li>
<li><p><strong>[可选]</strong>：为了优化推论性能，你也可以安装 NVIDIA TensorRT 3.0。更多细节，请参阅 <a href="http://docs.nvidia.com/deeplearning/sdk/tensorrt-install-guide/index.html#installing-tar">NVIDIA's TensorRT documentation</a>。为了兼容 Tensorflow，只需要 TensorRT Tar 问文件中关于安装说明的步骤 1-4；Python 包安装说明的步骤 5 和 6 可以忽略。详细的安装说明可以在 <a href="https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/tensorrt#installing-tensorrt-304">package documentataion</a> 进行查阅。</p>
</li>
<li><p><strong>[重要]</strong>：为了与预构建包 <code>tensorflow-gpu</code> 进行兼容，即使你在 Ubuntu 16.04 系统上进行安装，我们也建议你使用 TensorRT 的 Ubuntu <strong>14.04</strong> tar 文件包。  </p>
</li>
</ul>
<p><a href="//xitu.github.io/tensorflow-docs-web/./install/install_sources.html">通过源码安装 TensorFlow</a></p>
<h2 id="toc-3">决定如何安装 TensorFlow</h2>
<p>你必须决定使用哪一种方法来安装 TensorFlow。支持的方法有如下几种：</p>
<ul>
<li><a href="#InstallingVirtualenv">Virtualenv</a></li>
<li><a href="#InstallingNativePip">"native" pip</a></li>
<li><a href="#InstallingDocker">Docker</a></li>
<li><a href="#InstallingAnaconda">Anaconda</a><br>
 * 使用文档中的资源安装<a href="https://www.tensorflow.org/install/install_sources">另一个帮助文档</a>。</li>
</ul>
<p><strong>我们推荐使用 Virtualenv 安装方法</strong> <a href="https://virtualenv.pypa.io/en/stable/">Virtualenv</a> 是一个 Python 的虚拟环境，独立于其他的 Python 部署，不会与同一台机器上的其他 Python 程序互相影响。在安装 Virtualenv 的过程中，你需要安装 TensorFlow 及其依赖的所有包（实际上这很简单）。要开始使用 TensorFlow 工作的时候，你只需要激活("activate")虚拟环境。总而言之，Virtualenv 提供了一种安全可靠的方法来安装并运行 TensorFlow。</p>
<p>使用原生 pip 直接在你的系统上安装 TensorFlow 而不使用任何容器系统。<strong>对于希望使每一个用户都能够使用 TensorFlow 的多用户系统的管理员，我们推荐使用原生 pip 直接安装</strong>。由于原生 pip 安装不是在一个独立容器中的进行的隔离安装，因此，pip 可能会影响到同台机器上其他基于 Python 的程序。然而如果你了解 pip 和你当前的 Python 环境，原生 pip 安装会更加简单，往往只需要一条命令即可。</p>
<p>Docker 完全地将 TensorFlow 的安装与其他之前安装于你机器上的库隔离开。Docker 容器中包含 TensorFlow 和其他所有的依赖包。请注意 Docker 镜像可能会比较大（几百 MB 大小）。若你已经在一个很大的应用项目中使用了 Docker，你应该也用它来安装你的 TensorFlow。</p>
<p>在 Anaconda 中，你可以使用 conda 来创建一个虚拟环境。然而，我们推荐你使用 <code>pip install</code> 命令在 Anaconda 中安装 TensorFlow，而不是 <code>conda install</code>。</p>
<p><strong>注意：</strong> conda 中的包是社区而非官方支持的。也就是说，TensorFlow 的团队既不负责测试也不负责维护 conda 中的包。这可能给你的使用带来隐患，需要你自行负责。</p>
<p><a name="InstallingVirtualenv"></a></p>
<h2 id="toc-4">使用 Virtualenv 安装</h2>
<p>按照如下步骤来使用 virtualenv 安装 TensorFlow：</p>
<ol>
<li><p>选择下面的一条命令来安装 pip 和 Virtualenv：</p>
<pre>
$ <b>sudo apt-get install python-pip python-dev python-virtualenv</b> # for Python 2.7
$ <b>sudo apt-get install python3-pip python3-dev python-virtualenv</b> # for Python 3.n </pre></li>
<li><p>挑选其中的一条命令来创建一个 Virtualenv 的虚拟环境:</p>
<pre>
$ <b>virtualenv --system-site-packages</b> <i>targetDirectory</i> # for Python 2.7
$ <b>virtualenv --system-site-packages -p python3</b> <i>targetDirectory</i> # for Python 3.n </pre><p>其中 <code><em>targetDirectory</em></code> 指明了 Virtualenv 树中根部位置。我们的命令中假设了 <code><em>targetDirectory</em></code> 是 <code>~/tensorflow</code>，但你也可以指定任意目录。</p>
</li>
<li><p>通过以下任意一条命令激活 Virtualenv 的虚拟环境:</p>
<pre>
$ <b>source ~/tensorflow/bin/activate</b> # bash, sh, ksh, or zsh 
$ <b>source ~/tensorflow/bin/activate.csh</b>  # csh or tcsh
$ <b>. ~/tensorflow/bin/activate.fish</b>  # fish </pre><p>第一条 <tt>source</tt> 命令会将你的前缀变为</p>
<pre>(tensorflow)$ </pre></li>
<li><p>确保安装了 pip 8.1 或更高版本：</p>
<pre>(tensorflow)$ <b>easy_install -U pip</b></pre></li>
<li><p>运行下列其中的一条命令来在激活的 Virtualenv 环境中安装 TensorFlow:</p>
<pre>(tensorflow)$ <b>pip install --upgrade tensorflow</b>      # for Python 2.7
(tensorflow)$ <b>pip3 install --upgrade tensorflow</b>     # for Python 3.n
(tensorflow)$ <b>pip install --upgrade tensorflow-gpu</b>  # for Python 2.7 and GPU
(tensorflow)$ <b>pip3 install --upgrade tensorflow-gpu</b> # for Python 3.n and GPU </pre><p>如果前面几步成功了，则可以跳过步骤 6，否则需要继续执行步骤 6。</p>
</li>
<li><p>（可选）如果步骤 5 失败了（通常是由于你运行了一个低于 8.1 的 pip 版本），通过以下命令来在激活的 Virtualenv 环境中安装 TensorFlow：</p>
<pre>
(tensorflow)$ <b>pip install --upgrade</b> <i>tfBinaryURL</i>   # Python 2.7
(tensorflow)$ <b>pip3 install --upgrade</b> <i>tfBinaryURL</i>  # Python 3.n </pre><p>其中 <code><em>tfBinaryURL</em></code> 指明了 TensorFlow 的 Python 包的 URL 路径。 <code><em>tfBinaryURL</em></code> 的值取决于操作系统，Python 版本和 GPU 支持。在这里找到时候你的系统的 <code><em>tfBinaryURL</em></code> <a href="#the_url_of_the_tensorflow_python_package">值</a>。例如，如果你要在 Linux 中安装 Python 3.4 和仅支持 CPU 环境的 TensorFlow，在激活的 virtualenv 环境中运行如下命令即可：</p>
<pre>
(tensorflow)$ <b>pip3 install --upgrade \
https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-1.8.0rc1-cp34-cp34m-linux_x86_64.whl</b> </pre></li>
</ol>
<p>如果你遇见了安装问题，请见：<a href="#common_installation_problems">常见安装问题</a>。</p>
<h3 id="toc-5">下一步</h3>
<p>在安装了 TensorFlow 之后，需要<a href="#ValidateYourInstallation">验证你的安装</a>。</p>
<p>请注意你必须在每次运行 TensorFlow 之前都要激活你的 Virtualenv 环境。如果 Virtualenv 环境当前并没有激活，运行以下其中一条命令：</p>
<pre>
$ <b>source ~/tensorflow/bin/activate</b>      # bash, sh, ksh, or zsh
$ <b>source ~/tensorflow/bin/activate.csh</b>  # csh or tcsh </pre><p>当 Virtualenv 环境激活后，你可以使用 shell 来运行相关程序。出现如下提示时，代表着那你的虚拟环境已经激活了：</p>
<pre>(tensorflow)$ </pre><p>当你使用完 TensorFlow 之后，你可以通过 <code>deactivate</code> 命令来休眠该环境:</p>
<pre>(tensorflow)$ <b>deactivate</b> </pre><p>前缀提示会变回原来默认的样式（由 <code>PS1</code> 环境变量定义）。</p>
<h3 id="toc-6">卸载 TensorFlow</h3>
<p>要卸载 TensorFlow，只需要简单地移除你所创建的整个目录树<br>
例如：</p>
<pre>$ <b>rm -r</b> <i>targetDirectory</i> </pre><p><a name="InstallingNativePip"></a></p>
<h2 id="toc-7">使用原生 pip 安装</h2>
<p>你也可以使用 pip 安装 TensorFlow，在简单的安装过程和复杂的安装过程之间进行选择。你可能会需要通过 pip 来安装 TensorFlow，在一个简单的安装过程和一个更复杂的中选择其一：</p>
<p><strong>注意：</strong><a href="https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/pip_package/setup.py">setup.py 中的 REQUIRED_PACKAGES 部分</a><br>
列出了 TensorFlow 安装时 pip 会安装或升级的所有的包</p>
<h3 id="toc-8">安装前提：Python 和 Pip</h3>
<p>Python 是自动安装于 Ubuntu 中的。花一秒的时间来确认一下系统中安装的 Python 版本(命令 <code>python -V</code>)：</p>
<ul>
<li>Python 2.7</li>
<li>Python 3.4+</li>
</ul>
<p>pip 或 pip3 包管理<strong>通常</strong>会安装在 Ubuntu 系统上。通过 <code>pip -V</code> 或 <code>pip3 -V</code> 命令来确认下是否有安装。我们强烈建议安装 8.1 或更高版本的 pip 或 pip3。如果没有安装，运行如下命令来安装或更新到最新的 pip 版本：</p>
<pre>$ <b>sudo apt-get install python-pip python-dev</b>   # for Python 2.7
$ <b>sudo apt-get install python3-pip python3-dev</b> # for Python 3.n
</pre><h3 id="toc-9">安装 TensorFlow</h3>
<p>假设之前所需的软件已经安装在了你的 Linux 主机上，那么进行如下几步：</p>
<ol>
<li><p>通过其中的<strong>一条命令</strong>安装 TensorFlow：</p>
<pre>
$ <b>pip install tensorflow</b>      # Python 2.7; CPU support (no GPU support) 
$ <b>pip3 install tensorflow</b>     # Python 3.n; CPU support (no GPU support)
$ <b>pip install tensorflow-gpu</b>  # Python 2.7;  GPU support
$ <b>pip3 install tensorflow-gpu</b> # Python 3.n; GPU support </pre><p>如果命令完成了安装，你现在应该<a href="#ValidateYourInstallation">对你的安装进行验证</a>。</p>
</li>
<li><p>(可选) 如果步骤 1 失败了，安装如下格式执行命令进行安装:</p>
<pre>
$ <b>sudo pip  install --upgrade</b> <i>tfBinaryURL</i>   # Python 2.7
$ <b>sudo pip3 install --upgrade</b> <i>tfBinaryURL</i>   # Python 3.n </pre><p>其中 <code><em>tfBinaryURL</em></code> 指明了 TensorFlow 的 Python 包的 URL 路径。<code><em>tfBinaryURL</em></code> 的值取决于操作系统，Python 版本和 GPU 支持。在<a href="#the_url_of_the_tensorflow_python_package">这里</a>找到时候你的系统的 <code><em>tfBinaryURL</em></code> 值。例如，如果你要在 Linux 中安装 Python 3.4 和仅支持 CPU 环境的 TensorFlow，在激活的 Virtualenv 环境中运行如下命令即可：</p>
<pre>
(tensorflow)$ <b>pip3 install --upgrade \
https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-1.8.0rc1-cp34-cp34m-linux_x86_64.whl</b> </pre><p>如果该步骤失败了，见这里：<a href="#common_installation_problems">常见安装问题</a>.</p>
</li>
</ol>
<h3 id="toc-10">下一步</h3>
<p>安装完毕 TensorFlow 之后，<a href="#ValidateYourInstallation">验证你的安装</a>.</p>
<h3 id="toc-11">卸载</h3>
<p>要卸载 TensorFlow，运行如下命令：</p>
<pre>
$ <b>sudo pip uninstall tensorflow</b>  # for Python 2.7
$ <b>sudo pip3 uninstall tensorflow</b> # for Python 3.n </pre><p><a name="InstallingDocker"></a></p>
<h2 id="toc-12">使用 Docker 安装</h2>
<p>通过以下几步来使用 Docker 安装 TensorFlow：</p>
<ol>
<li>如 <a href="http://docs.docker.com/engine/installation/">Docker 文档</a>中所描述的那样来安装 Docker。</li>
<li>或者，创建一个 Linux group 叫做 <code>docker</code>，如 <a href="https://docs.docker.com/engine/installation/linux/linux-postinstall/">Docker 文档</a>中所描述的那样，这样无需 sudo 命令即可运行容器。（如果你不做这一步，你需要在每次使用 Docker 时都使用 sudo 命令。)</li>
<li>要安装支持 GPU 的 TensorFlow，你必须先安装位于 GitHub 中的<a href="https://github.com/NVIDIA/nvidia-docker">nvidia-docker</a></li>
<li>运行包含<a href="https://hub.docker.com/r/tensorflow/tensorflow/tags/">TensorFlow 二进制镜像</a>的 Docker。</li>
</ol>
<p>剩下的部分解释了如何运行一个 Docker 容器。</p>
<h3 id="toc-13">仅 CPU 支持</h3>
<p>要运行一个仅支持 CPU 的 Docker 容器（即不带 GPU 支持），运行如下格式的命令：</p>
<pre>
$ docker run -it <i>-p hostPort:containerPort TensorFlowCPUImage</i>
</pre><p>其中:</p>
<ul>
<li><tt><i>-p hostPort:containerPort</i></tt> 是可选的如果你准备从 shell 命令行中运行 TensorFlow 程序，那么忽略该选项。如果你准备在如 Jupyter notebooks 中运行 TensorFlow，把 <tt><i>hostPort</i></tt> 和 <tt><i>containerPort</i></tt> 都设置为 <tt>8888</tt>。如果你想在容器中运行 TensorBoard，加一个 <code>-p</code>，将<i>hostPort</i> 和 <i>containerPort</i> 都设置为 6006。</li>
<li><p><tt><i>TensorFlowCPUImage</i></tt> 是必需的。它指定了 Docker。选择声明其中的一个值：</p>
<ul>
<li><tt>tensorflow/tensorflow</tt>，这是 TensorFlow CPU 二进制镜像的值。<br>
   * <tt>tensorflow/tensorflow:latest-devel</tt>，这是最新的 TensorFlow CPU 二进制镜像加上源码，</li>
<li><tt>tensorflow/tensorflow:<i>version</i></tt>，是某一特定的版本（比如，1.1.0rc1）的 TensorFlow CPU 二进制镜像。<br>
   * <tt>tensorflow/tensorflow:<i>version</i>-devel</tt>，是某一特定的版本（比如，1.1.0rc1）的 TensorFlow CPU 二进制镜像加源码。</li>
</ul>
<p>   <tt>gcr.io</tt> 是 Google 容器注册（Google Container Registry）。注意一些 TensorFlow 的镜像也可以在 <a href="https://hub.docker.com/r/tensorflow/tensorflow/">dockerhub</a> 中找到。</p>
</li>
</ul>
<p>例如，如下命令在 Docker 容器中运行 TensorFlow CPU 二进制镜像，可以从 shell 命令行中运行 TensorFlow：</p>
<pre>
$ <b>docker run -it tensorflow/tensorflow bash</b>
</pre><p>如下命令也可以在 Docker 中运行最新的 TensorFlow CPU 二进制镜像。不同的是，在这个 Docker 镜像中，你可以在 Jupyter notebook 中运行 TensorFlow：</p>
<pre>
$ <b>docker run -it -p 8888:8888 tensorflow/tensorflow</b>
</pre><p>Docker 将会在你第一次运行的时候下载 TensorFlow 二进制镜像。</p>
<h3 id="toc-14">GPU 支持</h3>
<p>在安装 GPU 支持的 TensorFlow 之前，确保你的系统符合<br>
<a href="#NVIDIARequirements">NVIDIA 软件要求</a>.  要运行一个带有 NVIDIA GPU 支持的 Docker 容器运行如下格式的命令：</p>
<pre>
$ <b>nvidia-docker run -it</b> <i>-p hostPort:containerPort TensorFlowGPUImage</i>
</pre><p>其中:</p>
<ul>
<li><tt><i>-p hostPort:containerPort</i></tt> 是可选的如果你准备从 shell 命令行中运行 TensorFlow 程序，那么忽略该选项。如果你准备在如 Jupyter notebooks 中运行 TensorFlow，把 <tt><i>hostPort</i></tt> 和 <tt><i>containerPort</i></tt> 都设置为 <tt>8888</tt>。如果你想在容器中运行 TensorBoard，加一个 <code>-p</code>，将<i>hostPort</i> 和 <i>containerPort</i> 都设置为 6006。</li>
<li><p><tt><i>TensorFlowCPUImage</i></tt> 是必需的。 它指定了 Docker。 选择声明其中的一个值：</p>
<ul>
<li><tt>tensorflow/tensorflow</tt>， 这是 TensorFlow CPU 二进制镜像的值。</li>
<li><tt>tensorflow/tensorflow:latest-devel</tt>，这是最新的 TensorFlow CPU 二进制镜像加上源码，</li>
<li><tt>tensorflow/tensorflow:<i>version</i></tt>，是某一特定的版本（比如，1.1.0rc1）的 TensorFlow CPU 二进制镜像。</li>
<li><tt>tensorflow/tensorflow:<i>version</i>-devel</tt>，是某一特定的版本（比如，1.1.0rc1）的 TensorFlow CPU 二进制镜像加源码。</li>
</ul>
<p><tt>gcr.io</tt> 是 Google 容器注册（Google Container Registry）。注意一些 TensorFlow 的镜像也可以在<br>
<a href="https://hub.docker.com/r/tensorflow/tensorflow/">dockerhub</a> 中找到.</p>
</li>
</ul>
<p>例如，如下命令在 Docker 容器中运行 TensorFlow CPU 二进制镜像，可以从 shell 命令行中运行 TensorFlow：</p>
<pre>
$ <b>nvidia-docker run -it tensorflow/tensorflow:latest-gpu bash</b>
</pre><p>如下命令也在 Docker 容器中运行了最新的 TensorFlow GPU 二进制镜像。在这个 Docker 容器中，你可以在 Jupyter notebook 中运行程序：</p>
<pre>
$ <b>nvidia-docker run -it -p 8888:8888 tensorflow/tensorflow:latest-gpu</b>
</pre><p>如下的命令可以安装一个较早的 TensorFlow 版本（0.12.1）：</p>
<pre>
$ <b>nvidia-docker run -it -p 8888:8888 tensorflow/tensorflow:0.12.1-gpu</b>
</pre><p>Docker 会在你第一次运行的时候下载 TensorFlow 二进制镜像。更多信息见 <a href="https://github.com/tensorflow/tensorflow/tree/master/tensorflow/tools/docker">TensorFlow docker readme</a>。</p>
<h3 id="toc-15">下一步</h3>
<p>你应该<a href="#ValidateYourInstallation">验证你的安装</a>.</p>
<p><a name="InstallingAnaconda"></a></p>
<h2 id="toc-16">使用 Anaconda 安装</h2>
<p>按照如下步骤在 Anaconda 环境中按照 TensorFlow：</p>
<ol>
<li><p>按照 <a href="https://www.continuum.io/downloads">Anaconda 下载网站</a>中的指导来下载并安装 Anaconda。</p>
</li>
<li><p>通过以下命令建立一个叫做<tt>tensorflow</tt> 的 conda 环境来运行某一版本的 Python:</p>
<pre>$ <b>conda create -n tensorflow pip python=2.7 # or python=3.3, etc.</b></pre></li>
<li><p>使用如下命令来激活 conda 环境：</p>
<pre>$ <b>source activate tensorflow</b>
(tensorflow)$  # 这时你的前缀应该变成这样 </pre></li>
<li><p>运行如下格式的命令来在你的 conda 环境中安装 TensorFlow：</p>
<pre>
(tensorflow)$ <b>pip install --ignore-installed --upgrade</b> <i>tfBinaryURL</i> </pre><p>其中 <code><em>tfBinaryURL</em></code> 是 <a href="#the_url_of_the_tensorflow_python_package">TensorFlow Python 包的 URL</a>。例如，如下命令安装了仅支持 CPU 的 Python 3.4 版本下的 TensorFlow：</p>
<pre>
(tensorflow)$ <b>pip install --ignore-installed --upgrade \
https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-1.8.0rc1-cp34-cp34m-linux_x86_64.whl</b> </pre></li>
</ol>
<p><a name="ValidateYourInstallation"></a></p>
<h2 id="toc-17">验证你的安装</h2>
<p>按照如下步骤验证你的 TensorFlow 安装：</p>
<p> 1. 确保你的环境可以运行 TensorFlow （即：若有虚拟环境应激活它）</p>
<ol>
<li>执行一个简短的 TensorFlow 程序</li>
</ol>
<h3 id="toc-18">准备你的环境</h3>
<p>如果你是使用原生 pip，Virtualenv 或者 Anaconda 安装的，那么进行如下步骤：</p>
<ol>
<li>开启一个终端。</li>
<li>如果是使用 Virtualenv 或 Anaconda 安装，激活你的容器。 </li>
<li>如果使用的 TensorFlow 源码安装，跳转至任意路径，<strong>除了</strong>有 TensorFlow 源码的地方。</li>
</ol>
<p>如果你是通过 Docker 安装的，开启一个你可以使用 bush 的 Docker 容器，如：</p>
<pre>
$ <b>docker run -it tensorflow/tensorflow bash</b>
</pre><h3 id="toc-19">执行一个简短的 TensorFlow 程序</h3>
<p>在你的 shell 命令行中开启 Python：</p>
<pre>$ <b>python</b></pre><p>在 Python 的交互式 shell 命令行中运行如下程序：</p>
<pre><code class="lang-python"># Python
import tensorflow as tf
hello = tf.constant(&#39;Hello, TensorFlow!&#39;)
sess = tf.Session()
print(sess.run(hello))
</code></pre>
<p>如果系统输出一下数据，那么代表着你已经准备好编写 TensorFlow 程序了：</p>
<pre>Hello, TensorFlow!</pre><p>如果系统输出了一个错误信息，见<a href="#common_installation_problems">常见安装错误</a>.</p>
<p>如果你是机器学习的新手，我们推荐以下内容：</p>
<ul>
<li><a href="https://developers.google.com/machine-learning/crash-course">机器学习速成课程</a></li>
<li><a href="//xitu.github.io/tensorflow-docs-web/get_started/get_started_for_beginners.html">Graph Execution 入门</a></li>
</ul>
<p><a href="//xitu.github.io/tensorflow-docs-web/get_started/premade_estimators.html">Premade Estimators</a></p>
<h2 id="toc-20">常见安装错误</h2>
<p>我们依赖于 Stack Overflow 来编写 TensorFlow 的安装问题和它们的解决方案。下面的表格包含了 Stack Overflow 关于常见安装问题的回答。如果你遇见了其他的错误信息或者没有在表格中列出的安装问题，请在 Stack Overflow 上搜索。如果 Stack Overflow 中没有显示相关的错误信息，创建一个新的问题并加上 <code>tensorflow</code> 标签。</p>
<table>
<tr> <th>Stack Overflow 链接</th> <th>错误信息 Error Message</th> </tr>

<tr>
  <td><a href="https://stackoverflow.com/q/36159194">36159194</a></td>
  <td><pre>ImportError: libcudart.so.<i>Version</i>: cannot open shared object file:
  No such file or directory</pre></td>
</tr>

<tr>
  <td><a href="https://stackoverflow.com/q/41991101">41991101</a></td>
  <td><pre>ImportError: libcudnn.<i>Version</i>: cannot open shared object file:
  No such file or directory</pre></td>
</tr>

<tr>
  <td><a href="http://stackoverflow.com/q/36371137">36371137</a> and
  <a href="#Protobuf31">here</a></td>
  <td><pre>libprotobuf ERROR google/protobuf/src/google/protobuf/io/coded_stream.cc:207] A
  protocol message was rejected because it was too big (more than 67108864 bytes).
  To increase the limit (or to disable these warnings), see
  CodedInputStream::SetTotalBytesLimit() in google/protobuf/io/coded_stream.h.</pre></td>
</tr>

<tr>
  <td><a href="https://stackoverflow.com/q/35252888">35252888</a></td>
  <td><pre>Error importing tensorflow. Unless you are using bazel, you should
  not try to import tensorflow from its source directory; please exit the
  tensorflow source tree, and relaunch your python interpreter from
  there.</pre></td>
</tr>

<tr>
  <td><a href="https://stackoverflow.com/q/33623453">33623453</a></td>
  <td><pre>IOError: [Errno 2] No such file or directory:
  '/tmp/pip-o6Tpui-build/setup.py'</tt></pre>
</tr>

<tr>
  <td><a href="http://stackoverflow.com/q/42006320">42006320</a></td>
  <td><pre>ImportError: Traceback (most recent call last):
  File ".../tensorflow/core/framework/graph_pb2.py", line 6, in <module>
  from google.protobuf import descriptor as _descriptor
  ImportError: cannot import name 'descriptor'</pre>
  </td>
</tr>

<tr>
  <td><a href="https://stackoverflow.com/questions/35190574">35190574</a> </td>
  <td><pre>SSLError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify
  failed</pre></td>
</tr>

<tr>
  <td><a href="http://stackoverflow.com/q/42009190">42009190</a></td>
  <td><pre>
  Installing collected packages: setuptools, protobuf, wheel, numpy, tensorflow
  Found existing installation: setuptools 1.1.6
  Uninstalling setuptools-1.1.6:
  Exception:
  ...
  [Errno 1] Operation not permitted:
  '/tmp/pip-a1DXRT-uninstall/.../lib/python/_markerlib' </pre></td>
</tr>

<tr>
  <td><a href="http://stackoverflow.com/questions/36933958">36933958</a></td>
  <td><pre>
  ...
  Installing collected packages: setuptools, protobuf, wheel, numpy, tensorflow
  Found existing installation: setuptools 1.1.6
  Uninstalling setuptools-1.1.6:
  Exception:
  ...
  [Errno 1] Operation not permitted:
  '/tmp/pip-a1DXRT-uninstall/System/Library/Frameworks/Python.framework/
   Versions/2.7/Extras/lib/python/_markerlib'</pre>
  </td>
</tr>

</table><p><a name="TF_PYTHON_URL"></a></p>
<h2 id="toc-21">TensorFlow Python 软件包的网址</h2>
<p>一些安装方法中需要 TensorFlow Python 包的 URL，你所声明的值取决下面三个因素：</p>
<ul>
<li>操作系统</li>
<li>Python 版本</li>
<li>CPU 还是 GPU 支持</li>
</ul>
<p>这个部分记录了 Linux 相关安装的 URL 值</p>
<h3 id="toc-22">Python 2.7</h3>
<p>仅支持 CPU:</p>
<pre>
https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-1.8.0rc1-cp27-none-linux_x86_64.whl
</pre><p>支持 GPU:</p>
<pre>
https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow_gpu-1.8.0rc1-cp27-none-linux_x86_64.whl
</pre><p>注意 GPU 支持需要符合<a href="#NVIDIARequirements">NVIDIA 对运行 GPU 支持版本的 TensorFlow 的要求</a>的软硬件要求。</p>
<h3 id="toc-23">Python 3.4</h3>
<p>仅支持 CPU：</p>
<pre>
https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-1.8.0rc1-cp34-cp34m-linux_x86_64.whl
</pre><p>支持 GPU:</p>
<pre>
https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow_gpu-1.8.0rc1-cp34-cp34m-linux_x86_64.whl
</pre><p>注意 GPU 支持需要符合<a href="#NVIDIARequirements">NVIDIA 对运行 GPU 支持版本的 TensorFlow 的要求</a>的软硬件要求。</p>
<h3 id="toc-24">Python 3.5</h3>
<p>支持 CPU：</p>
<pre>
https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-1.8.0rc1-cp35-cp35m-linux_x86_64.whl
</pre><p>GPU 支持：</p>
<pre>
https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow_gpu-1.8.0rc1-cp35-cp35m-linux_x86_64.whl
</pre><p>注意 GPU 支持需要符合<a href="#NVIDIARequirements">NVIDIA 对运行 GPU 支持版本的 TensorFlow 的要求</a>的软硬件要求。</p>
<h3 id="toc-25">Python 3.6</h3>
<p>仅支持 CPU：</p>
<pre>
https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-1.8.0rc1-cp36-cp36m-linux_x86_64.whl
</pre><p>GPU 支持：</p>
<pre>
https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow_gpu-1.8.0rc1-cp36-cp36m-linux_x86_64.whl
</pre><p>注意 GPU 支持需要符合<a href="#NVIDIARequirements">NVIDIA 对运行 GPU 支持版本的 TensorFlow 的要求</a>的软硬件要求。</p>

        </main>
        <div class="d-none d-xl-block col-xl-2 bd-toc">
        <ul id="table-of-content">
<li><a href="#toc-0">在 Ubuntu 上安装 TensorFlow</a><ul>
<li><a href="#toc-1">安装哪一个 TensorFlow</a></li>
<li><a href="#toc-3">决定如何安装 TensorFlow</a></li>
<li><a href="#toc-4">使用 Virtualenv 安装</a></li>
<li><a href="#toc-7">使用原生 pip 安装</a></li>
<li><a href="#toc-12">使用 Docker 安装</a></li>
<li><a href="#toc-16">使用 Anaconda 安装</a></li>
<li><a href="#toc-17">验证你的安装</a></li>
<li><a href="#toc-20">常见安装错误</a></li>
<li><a href="#toc-21">TensorFlow Python 软件包的网址</a></li>
</ul>
</li>
</ul>

        </div>
    </div>
</div>
<!-- Content end-->

<!-- Footer start -->
<footer class="footer">
    <div class="container">
        <div>如果您发现本页面存在错误或可以改进，请<a href="https://github.com/xitu/tensorflow-docs/blob/zh-hans/install/install_linux.md" target="_blank">点击此处</a>帮助我们改进。本页贡献者：<span id="contributors"></span></div>
        <hr/>
        <div class="text-center official-links">
            <a href="https://www.tensorflow.org"><img
                    src="https://www.tensorflow.org/_static/b1fb9a8564/images/tensorflow/lockup.png" height="20"/></a>
            <a href="https://github.com/xitu/tensorflow-docs"><img
                    src="https://assets-cdn.github.com/images/modules/logos_page/GitHub-Logo.png" height="20"></a>
            <a href="https://juejin.im"><img src="//xitu.github.io/tensorflow-docs-web/assets/imgs/logo_app_white.png" height="20"/></a>
        </div>
    </div>
</footer>
<script>
    var contributors = [{'Starriers': 'https://avatars2.githubusercontent.com/u/24243206?v=4'}, {'leviding': 'https://avatars3.githubusercontent.com/u/26959437?v=4'}]
</script>
<!-- Footer end -->
</body>
<script src="//cdn.bootcss.com/jquery/3.3.1/jquery.slim.min.js" type="text/javascript"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js" type="text/javascript"></script>
<script src="//xitu.github.io/tensorflow-docs-web/assets/js/main.js" type="text/javascript"></script>
</html>